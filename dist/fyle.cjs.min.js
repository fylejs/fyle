/**
 * @license
 * fyle 0.0.1 https://github.com/fylejs/fyle/blob/master/LICENSE
 */
"use strict";var getPathSegments=function(e){return e.split("/")},getAbsolutePathSegments=function(e){return e.reduce(function(t,l,i){return".."!=l&&".."!=e[i+1]&&t.push(l),t},[])},getFilePathInfo=function(e){var t=/(.*?)(?:\..*)?$/,l=getPathSegments(e),i=getAbsolutePathSegments(l),n=i.length-1;i[n]=i[n].match(t)[1];var a=i[n],r=i.slice(0,-1);return{filePath:i.join("/"),fileName:a,pathArr:r,path:r.length>0?r.join("/")+"/":""}},files={},filesByDependency={},lastWatchedFiles=[],scheduledFiles=[],createRequire=function(e){return function(t,l){var i=getFilePathInfo(e+t);if(!files[i.filePath])return lastWatchedFiles[lastWatchedFiles.length-1].requiredFiles.push(i.filePath),window;if(l&&0!==l.length){var n=Object.create(null);return l.forEach(function(e){n[e]=files[i.filePath][e]}),n}return files[i.filePath]}},wait=function(){var e=!1,t=lastWatchedFiles[lastWatchedFiles.length-1];if(t&&t.requiredFiles.length>0){t.waiting=!0;for(var l=scheduledFiles.push(t)-1,i=0;i<t.requiredFiles.length;i++){var n=t.requiredFiles[i];filesByDependency[n]||(filesByDependency[n]=[]),filesByDependency[n].push(l)}e=!0}return e},includeScheduledFiles=function(e,t){return filesByDependency[t]&&filesByDependency[t].forEach(function(t){var l=e[t];if(null!==l){for(var i=!0,n=0;n<l.requiredFiles.length;n++)if(!files[l.requiredFiles[n]]){i=!1;break}i&&(l.fileFn(),e[t]=null,e=includeScheduledFiles(e,l.filePath))}}),e},createFyle=function(e){e=e||"";var t=function(t,l){var i=getFilePathInfo(e+t);if(null!=files[i.filePath])return!1;files[i.filePath]=Object.create(null);var n=function(){files[i.filePath].return=l.call(null,files[i.filePath],createRequire(i.path),createFyle(i.path))};lastWatchedFiles.push({fileFn:n,filePath:i.filePath,requiredFiles:[],waiting:!1}),n();var a=lastWatchedFiles[lastWatchedFiles.length-1].waiting;return lastWatchedFiles=lastWatchedFiles.slice(0,-1),a||(scheduledFiles=includeScheduledFiles(scheduledFiles,i.filePath)),files[i.filePath]};return t.require=createRequire(e),t.wait=wait,t},fyle$1=createFyle();module.exports=fyle$1;